@model IEnumerable<ProjectEND.Models.RoomBill>

@{
    ViewBag.Title = "Billforuser";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>บิลค่าใช้จ่าย</h2>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.RoomBill_Id)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Order_Id)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Order.DataUser.User_FristName) -  @Html.DisplayNameFor(model => model.Order.DataUser.User_LastName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Water)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Ele)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Room_Price)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Total_Price)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Bill_Date_Out)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.StatusOrder.Sta_Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Order.Date_In)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.RoomBill_Id)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Order_Id)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Order.DataUser.Title.Title_name) @Html.DisplayFor(modelItem => item.Order.DataUser.User_FristName) @Html.DisplayFor(modelItem => item.Order.DataUser.User_LastName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Water)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Ele)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Room_Price)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Total_Price)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Bill_Date_Out)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.StatusOrder.Sta_Name)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Order.Date_In)
    </td>
    <td>
        @if (item.StaBill_id == 1)
        {
            <button class="btn btn-success" onclick="Delete('@item.RoomBill_Id')">ชำระเงิน</button>
        }
    </td>
</tr>
}

</table>
<script>
    function Delete(id) {
        Swal.fire({
            title: 'ต้องการชำระเงินใช่หรือไม่?',
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'ยืนยัน',
            cancelButtonText: 'ยกเลิก'
        }).then((result) => {
            if (result.isConfirmed) {
                window.location.href = '@Url.Action("Pay","PaymentBill")/' + id
            }
        })
    }

</script>